<!--
  Generated template for the ResultsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Analyze</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
	<h4>{{ survey_title }}</h4>
	<p>{{ description }}</p>

	<div *ngFor="let question of questions; let idx = index">
		<ion-item text-wrap>
			<ion-label>{{idx+1}}. {{ question['message'] }}</ion-label>
			<button item-end clear ion-button (click)="showResult(idx)">
				View 
				<ion-icon name="ios-arrow-forward"></ion-icon>
			</button>
		</ion-item>

		<div *ngIf="question['type'] == 'multipleChoice' || question['type'] == 'checkbox' || question['type'] == 'date' || question['type'] == 'dropdown' ">
			<ion-toolbar style="padding: 0 30px; display: none;" id="opt_{{idx}}">
				<ion-segment mode="ios" [(ngModel)]="chartOptions[idx]">
				    <ion-segment-button value="pie" (click)="showPieChart(idx)">Pie</ion-segment-button>
				    <ion-segment-button value="donut" (click)="showDonutChart(idx)">Donut</ion-segment-button>
				    <ion-segment-button value="bar" (click)="showBarChart(idx)">Bar</ion-segment-button>
				</ion-segment>
			</ion-toolbar>
		</div>

		<div id="results_div_{{idx}}">
		</div>

		<div *ngIf="question['type'] == 'longAnswer' || question['type'] == 'shortAnswer' || question['type'] == 'date' || question['type'] == 'time' " id="openAnsDiv_{{idx}}" style="display: none;">
			List of Answers:
			<ul>
				<li *ngFor="let ans of openAnswers">{{ ans }}</li>
			</ul>
		</div>
	</div>

	<!-- TEMPORARY BUTTONS -->
	<button ion-button small (click)="showTable()">Show Table</button>
	<div id="table_div" text-center></div>
</ion-content>
